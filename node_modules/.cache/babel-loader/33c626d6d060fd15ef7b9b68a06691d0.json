{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./rightbar.css\";import Online from\"../online/Online\";import axios from\"axios\";import{useEffect,useState,useContext}from\"react\";import{Link}from\"react-router-dom\";import{Add,Remove}from\"@material-ui/icons\";import{AuthContext}from\"../../context/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Rightbar(_ref){var _currentuser$followin;var user=_ref.user;var _useContext=useContext(AuthContext),currentuser=_useContext.user,dispatch=_useContext.dispatch;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),Friends=_useState2[0],setFriends=_useState2[1];var _useState3=useState(currentuser===null||currentuser===void 0?void 0:(_currentuser$followin=currentuser.followings)===null||_currentuser$followin===void 0?void 0:_currentuser$followin.includes(user===null||user===void 0?void 0:user._id)),_useState4=_slicedToArray(_useState3,2),followed=_useState4[0],setfollowed=_useState4[1];useEffect(function(){var _currentuser$followin2;setfollowed(currentuser===null||currentuser===void 0?void 0:(_currentuser$followin2=currentuser.followings)===null||_currentuser$followin2===void 0?void 0:_currentuser$followin2.includes(user===null||user===void 0?void 0:user._id));},[currentuser,user===null||user===void 0?void 0:user._id]);useEffect(function(){var fetchFriends=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var friends;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://musasocialapi.herokuapp.com/users/friends/\".concat(user===null||user===void 0?void 0:user._id));case 3:friends=_context.sent;setFriends(friends.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchFriends(){return _ref2.apply(this,arguments);};}();fetchFriends();},[user===null||user===void 0?void 0:user._id]);var handleClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;if(!followed){_context2.next=7;break;}_context2.next=4;return axios.put(\"https://musasocialapi.herokuapp.com/users/\"+user._id+\"/unfollow\",{userId:currentuser===null||currentuser===void 0?void 0:currentuser._id});case 4:dispatch({type:\"UNFOLLOW\",payload:user._id});_context2.next=10;break;case 7:_context2.next=9;return axios.put(\"https://musasocialapi.herokuapp.com/users/\"+user._id+\"/follow\",{userId:currentuser===null||currentuser===void 0?void 0:currentuser._id});case 9:dispatch({type:\"FOLLOW\",payload:user._id});case 10:setfollowed(!followed);_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[0,13]]);}));return function handleClick(){return _ref3.apply(this,arguments);};}();var PF=process.env.REACT_APP_PUBLIC_FOLDER;var Home=function Home(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"birthdayContainer\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/assets/birthday.png\",alt:\"\",className:\"birthdayImg\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"birthdayText\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Ahmed Adil\"}),\" and \",/*#__PURE__*/_jsx(\"b\",{children:\"7 other Friends\"}),\" have a birthday today\"]})]}),/*#__PURE__*/_jsx(\"img\",{src:\"/assets/tesla.jpg\",alt:\"\",className:\"rightbarAd\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"rightbarTitle\",children:\"Online Friends\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"rightbarFriendList\"})]});};var ProfileRightbar=function ProfileRightbar(){return/*#__PURE__*/_jsxs(_Fragment,{children:[(currentuser===null||currentuser===void 0?void 0:currentuser.username)!==(user===null||user===void 0?void 0:user.username)&&/*#__PURE__*/_jsxs(\"button\",{className:\"rightbarFollowButton\",onClick:handleClick,children:[followed?\"Unfollow\":\"Follow\",followed?/*#__PURE__*/_jsx(Remove,{}):/*#__PURE__*/_jsx(Add,{})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"rightbarTitle\",children:\"User Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rightbarInfo\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rightbarInfoItem\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"rightbarInfoKey\",children:\"From:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"rightbarInfoValue\",children:user.from})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rightbarInfoItem\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"rightbarInfoKey\",children:\"Live:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"rightbarInfoValue\",children:user.city})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rightbarInfoItem\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"rightbarInfoKey\",children:\"Relationship:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"rightbarInfoValue\",children:user.relationship})]})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"rightbarTitle\",children:\"User Friends\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rightbarFollowings\",children:Friends.map(function(friend){return/*#__PURE__*/_jsx(Link,{to:\"/profile/\"+friend.username,style:{textDecoration:\"none\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"rightbarFollowing\",children:[/*#__PURE__*/_jsx(\"img\",{src:PF+friend.profilePicture,alt:\"\",className:\"rightbarFollowingImg\"}),/*#__PURE__*/_jsx(\"span\",{className:\"rightbarFollowingName\",children:friend===null||friend===void 0?void 0:friend.username})]})});})})]});};return/*#__PURE__*/_jsx(\"div\",{className:\"rightbar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rightbarWrapper\",children:user?/*#__PURE__*/_jsx(ProfileRightbar,{}):/*#__PURE__*/_jsx(Home,{})})});}","map":{"version":3,"sources":["C:/Users/musli/Desktop/mern MusaSocial/React/src/components/rightbar/Rightbar.jsx"],"names":["Online","axios","useEffect","useState","useContext","Link","Add","Remove","AuthContext","Rightbar","user","currentuser","dispatch","Friends","setFriends","followings","includes","_id","followed","setfollowed","fetchFriends","get","friends","data","console","log","handleClick","put","userId","type","payload","PF","process","env","REACT_APP_PUBLIC_FOLDER","Home","ProfileRightbar","username","from","city","relationship","map","friend","textDecoration","profilePicture"],"mappings":"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","sourcesContent":["import \"./rightbar.css\"\r\nimport Online from \"../online/Online\";\r\nimport  axios  from \"axios\";\r\nimport { useEffect, useState, useContext } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Add, Remove } from \"@material-ui/icons\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\n\r\nexport default function Rightbar({user}) {\r\n    const {user:currentuser, dispatch} = useContext(AuthContext)\r\n    const [Friends, setFriends] = useState([])\r\n    const [followed, setfollowed] = useState(currentuser?.followings?.includes(user?._id))\r\n\r\n    useEffect(() => {\r\n        setfollowed(currentuser?.followings?.includes(user?._id));\r\n    }, [currentuser, user?._id])\r\n\r\n    useEffect(() => {\r\n        const fetchFriends = async () => {\r\n            try {\r\n                const friends = await axios.get(`https://musasocialapi.herokuapp.com/users/friends/${user?._id}`);\r\n                setFriends(friends.data)\r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n        }\r\n        fetchFriends();\r\n        \r\n    }, [user?._id])\r\n    const handleClick = async () =>{\r\n        try {\r\n            if (followed) {\r\n                await axios.put(\"https://musasocialapi.herokuapp.com/users/\" + user._id + \"/unfollow\", {userId: currentuser?._id});\r\n                dispatch({type: \"UNFOLLOW\", payload: user._id});\r\n            } \r\n            else {\r\n                await axios.put(\"https://musasocialapi.herokuapp.com/users/\" + user._id + \"/follow\", {userId: currentuser?._id});\r\n                dispatch({type: \"FOLLOW\", payload: user._id});\r\n                \r\n            }\r\n            setfollowed(!followed);\r\n        } \r\n        catch (error) {\r\n            console.log(error)\r\n        }\r\n        \r\n    }\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n    const Home = () =>{\r\n        return(\r\n            <>\r\n            <div className=\"birthdayContainer\">\r\n                    <img src=\"/assets/birthday.png\" alt=\"\" className=\"birthdayImg\" />\r\n                    <span className=\"birthdayText\">\r\n                        <b>Ahmed Adil</b> and <b>7 other Friends</b> have a birthday today\r\n                    </span>\r\n                </div>\r\n                <img src=\"/assets/tesla.jpg\" alt=\"\" className=\"rightbarAd\" />\r\n                <h4 className=\"rightbarTitle\">Online Friends</h4>\r\n                <ul className=\"rightbarFriendList\">\r\n                    {/* online componentr here */}\r\n                </ul>\r\n            </>\r\n        )\r\n    }\r\n\r\n    const ProfileRightbar = () =>{\r\n        return(\r\n            <>\r\n            {currentuser?.username !== user?.username &&(\r\n                <button className=\"rightbarFollowButton\" onClick={handleClick}>\r\n                    {followed? \"Unfollow\": \"Follow\"}\r\n                    {followed? <Remove/>: <Add/>}\r\n                </button>\r\n            )}\r\n            <h4 className=\"rightbarTitle\">User Information</h4>\r\n            <div className=\"rightbarInfo\">\r\n                <div className=\"rightbarInfoItem\">\r\n                    <span className=\"rightbarInfoKey\">From:</span>\r\n                    <span className=\"rightbarInfoValue\">{user.from}</span>\r\n                </div>\r\n                <div className=\"rightbarInfoItem\">\r\n                    <span className=\"rightbarInfoKey\">Live:</span>\r\n                    <span className=\"rightbarInfoValue\">{user.city}</span>\r\n                </div>\r\n                <div className=\"rightbarInfoItem\">\r\n                    <span className=\"rightbarInfoKey\">Relationship:</span>\r\n                    <span className=\"rightbarInfoValue\">{user.relationship}</span>\r\n                </div>\r\n            </div>\r\n            <h4 className=\"rightbarTitle\">User Friends</h4>\r\n            <div className=\"rightbarFollowings\">\r\n                {\r\n                    Friends.map((friend) => (\r\n                        <Link to={\"/profile/\" + friend.username} style={{textDecoration: \"none\"}}>\r\n                            <div className=\"rightbarFollowing\">\r\n                                <img src={PF + friend.profilePicture} alt=\"\" className=\"rightbarFollowingImg\" />\r\n                                <span className=\"rightbarFollowingName\">{friend?.username}</span>\r\n                            </div>\r\n                        </Link>\r\n                        \r\n                    ))\r\n                }\r\n            </div>\r\n            </>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"rightbar\">\r\n            <div className=\"rightbarWrapper\">\r\n                {user ? <ProfileRightbar/> : <Home/>}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}