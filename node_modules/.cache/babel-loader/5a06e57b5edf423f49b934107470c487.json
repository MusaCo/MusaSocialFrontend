{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./feed.css\";import Share from\"../share/Share\";import Post from\"../post/Post\";import axios from\"axios\";import React,{useState,useEffect,useContext}from'react';import{AuthContext}from\"../../context/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Feed(_ref){var username=_ref.username;var _useContext=useContext(AuthContext),user=_useContext.user;var PF=process.env.REACT_APP_PUBLIC_FOLDER;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],SetPosts=_useState2[1];useEffect(function(){var fetchPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!username){_context.next=6;break;}_context.next=3;return axios.get(\"https://musasocialapi.herokuapp.com/post/profile/\".concat(username));case 3:_context.t0=_context.sent;_context.next=9;break;case 6:_context.next=8;return axios.get(\"/post/timeline/\".concat(user===null||user===void 0?void 0:user._id));case 8:_context.t0=_context.sent;case 9:result=_context.t0;SetPosts(result.data.sort(function(p1,p2){return new Date(p2.createdAt)-new Date(p1.createdAt);}));case 11:case\"end\":return _context.stop();}}},_callee);}));return function fetchPosts(){return _ref2.apply(this,arguments);};}();fetchPosts();},[username,user===null||user===void 0?void 0:user._id]);return/*#__PURE__*/_jsx(\"div\",{className:\"feed\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"feedWrapper\",children:[(!username||username===user.username)&&/*#__PURE__*/_jsx(Share,{}),posts.map(function(p){return/*#__PURE__*/_jsx(Post,{post:p},p._id);})]})});}","map":{"version":3,"sources":["C:/Users/musli/Desktop/mern MusaSocial/React/src/components/feed/Feed.jsx"],"names":["Share","Post","axios","React","useState","useEffect","useContext","AuthContext","Feed","username","user","PF","process","env","REACT_APP_PUBLIC_FOLDER","posts","SetPosts","fetchPosts","get","_id","result","data","sort","p1","p2","Date","createdAt","map","p"],"mappings":"seAAA,MAAO,YAAP,CACA,MAAOA,CAAAA,KAAP,KAAkB,gBAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,cAAjB,CACA,MAAQC,CAAAA,KAAR,KAAoB,OAApB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,UAArC,KAAuD,OAAvD,CACA,OAASC,WAAT,KAA4B,2BAA5B,C,wFAEA,cAAe,SAASC,CAAAA,IAAT,MAA0B,IAAXC,CAAAA,QAAW,MAAXA,QAAW,CACrC,gBAAeH,UAAU,CAACC,WAAD,CAAzB,CAAOG,IAAP,aAAOA,IAAP,CACA,GAAMC,CAAAA,EAAE,CAAGC,OAAO,CAACC,GAAR,CAAYC,uBAAvB,CAEJ,cAA0BV,QAAQ,CAAC,EAAD,CAAlC,wCAAOW,KAAP,eAAcC,QAAd,eAEIX,SAAS,CAAC,UAAM,CACZ,GAAMY,CAAAA,UAAU,2FAAG,kJACAR,QADA,+CACgBP,CAAAA,KAAK,CAACgB,GAAN,4DAA8DT,QAA9D,EADhB,qFACkGP,CAAAA,KAAK,CAACgB,GAAN,0BAA4BR,IAA5B,SAA4BA,IAA5B,iBAA4BA,IAAI,CAAES,GAAlC,EADlG,yCACTC,MADS,aAEfJ,QAAQ,CAACI,MAAM,CAACC,IAAP,CAAYC,IAAZ,CAAiB,SAACC,EAAD,CAAKC,EAAL,CAAW,CACjC,MAAO,IAAIC,CAAAA,IAAJ,CAASD,EAAE,CAACE,SAAZ,EAAyB,GAAID,CAAAA,IAAJ,CAASF,EAAE,CAACG,SAAZ,CAAhC,CACH,CAFQ,CAAD,CAAR,CAFe,uDAAH,kBAAVT,CAAAA,UAAU,2CAAhB,CAMAA,UAAU,GACb,CARQ,CAQN,CAACR,QAAD,CAAWC,IAAX,SAAWA,IAAX,iBAAWA,IAAI,CAAES,GAAjB,CARM,CAAT,CAUA,mBACI,YAAK,SAAS,CAAC,MAAf,uBACI,aAAK,SAAS,CAAC,aAAf,WACK,CAAC,CAACV,QAAD,EAAaA,QAAQ,GAAKC,IAAI,CAACD,QAAhC,gBAA4C,KAAC,KAAD,IADjD,CAEKM,KAAK,CAACY,GAAN,CAAU,SAAAC,CAAC,qBACR,KAAC,IAAD,EAAkB,IAAI,CAAEA,CAAxB,EAAWA,CAAC,CAACT,GAAb,CADQ,EAAX,CAFL,GADJ,EADJ,CAUH","sourcesContent":["import \"./feed.css\"\r\nimport Share from \"../share/Share\";\r\nimport Post from \"../post/Post\";\r\nimport  axios  from \"axios\";\r\nimport React, { useState, useEffect, useContext } from 'react';\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\n\r\nexport default function Feed({username}) {\r\n    const {user} = useContext(AuthContext)\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\r\nconst [posts, SetPosts] = useState([]);\r\n    \r\n    useEffect(() => {\r\n        const fetchPosts = async () =>{\r\n            const result = username? await axios.get(`https://musasocialapi.herokuapp.com/post/profile/${username}`) : await axios.get(`/post/timeline/${user?._id}`)\r\n            SetPosts(result.data.sort((p1, p2) =>{\r\n                return new Date(p2.createdAt) - new Date(p1.createdAt);\r\n            }));\r\n        };\r\n        fetchPosts();\r\n    }, [username, user?._id])\r\n\r\n    return (\r\n        <div className=\"feed\">\r\n            <div className=\"feedWrapper\">\r\n                {(!username || username === user.username) &&<Share/>}\r\n                {posts.map(p=> (\r\n                    <Post key={p._id} post={p}/>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}