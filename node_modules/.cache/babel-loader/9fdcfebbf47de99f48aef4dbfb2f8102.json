{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{useContext,useRef}from\"react\";import\"./login.css\";import{loginCall}from\"../../apiCalls\";import{AuthContext}from\"../../context/AuthContext\";import{CircularProgress}from\"@material-ui/core\";import axios from\"axios\";import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var history=useHistory();var email=useRef();var password=useRef();var _useContext=useContext(AuthContext),user=_useContext.user,isFetching=_useContext.isFetching,error=_useContext.error,dispatch=_useContext.dispatch;var Submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();dispatch({type:\"LOGIN_START\"});_context.prev=2;_context.next=5;return axios.post(\"https://musasocialapi.herokuapp.com/auth/login\",{email:email.current.value,password:password.current.value});case 5:res=_context.sent;dispatch({type:\"LOGIN_SUCCESS\",payload:res.data});history.push(\"/\");_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);dispatch({type:\"LOGIN_FAILURE\",payload:_context.t0});console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function Submit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loginWrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"loginLeft\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"loginLogo\",children:\"MusaSocial\"}),/*#__PURE__*/_jsx(\"span\",{className:\"loginDesc\",children:\"Connect with Friends That You Dont Have :)\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"loginRight\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"loginBox\",onSubmit:Submit,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Email\",className:\"loginInput\",ref:email,required:true,type:\"email\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Password\",className:\"loginInput\",minLength:\"6\",ref:password,required:true,type:\"password\"}),/*#__PURE__*/_jsx(\"button\",{className:\"loginButton\",disabled:isFetching,children:isFetching?/*#__PURE__*/_jsx(CircularProgress,{color:\"white\"}):\"Login\"}),/*#__PURE__*/_jsx(\"span\",{className:\"loginForgot\",children:\"Forgot Password\"}),/*#__PURE__*/_jsx(\"button\",{className:\"loginRegisterButton\",children:isFetching?/*#__PURE__*/_jsx(CircularProgress,{color:\"white\"}):\"Create Account\"})]})})]})});}","map":{"version":3,"sources":["C:/Users/musli/Desktop/mern MusaSocial/React/src/pages/login/Login.jsx"],"names":["useContext","useRef","loginCall","AuthContext","CircularProgress","axios","useHistory","Login","history","email","password","user","isFetching","error","dispatch","Submit","e","preventDefault","type","post","current","value","res","payload","data","push","console","log"],"mappings":"mUAAA,OAASA,UAAT,CAAqBC,MAArB,KAAmC,OAAnC,CACA,MAAO,aAAP,CACA,OAAQC,SAAR,KAAwB,gBAAxB,CACA,OAASC,WAAT,KAA4B,2BAA5B,CACA,OAASC,gBAAT,KAAiC,mBAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,wFAEA,cAAe,SAASC,CAAAA,KAAT,EAAiB,CAC5B,GAAMC,CAAAA,OAAO,CAAGF,UAAU,EAA1B,CACA,GAAMG,CAAAA,KAAK,CAAGR,MAAM,EAApB,CACA,GAAMS,CAAAA,QAAQ,CAAGT,MAAM,EAAvB,CACA,gBAA2CD,UAAU,CAACG,WAAD,CAArD,CAAMQ,IAAN,aAAMA,IAAN,CAAYC,UAAZ,aAAYA,UAAZ,CAAwBC,KAAxB,aAAwBA,KAAxB,CAA+BC,QAA/B,aAA+BA,QAA/B,CAEA,GAAMC,CAAAA,MAAM,0FAAG,iBAAOC,CAAP,0HACXA,CAAC,CAACC,cAAF,GACAH,QAAQ,CAAC,CAACI,IAAI,CAAE,aAAP,CAAD,CAAR,CAFW,sCAIWb,CAAAA,KAAK,CAACc,IAAN,CAAW,gDAAX,CAA6D,CAACV,KAAK,CAAEA,KAAK,CAACW,OAAN,CAAcC,KAAtB,CAA6BX,QAAQ,CAAEA,QAAQ,CAACU,OAAT,CAAiBC,KAAxD,CAA7D,CAJX,QAIDC,GAJC,eAKPR,QAAQ,CAAC,CAACI,IAAI,CAAE,eAAP,CAAwBK,OAAO,CAAED,GAAG,CAACE,IAArC,CAAD,CAAR,CACAhB,OAAO,CAACiB,IAAR,CAAa,GAAb,EANO,iFASPX,QAAQ,CAAC,CAACI,IAAI,CAAE,eAAP,CAAwBK,OAAO,YAA/B,CAAD,CAAR,CACAG,OAAO,CAACC,GAAR,cAVO,qEAAH,kBAANZ,CAAAA,MAAM,4CAAZ,CAcA,mBACI,YAAK,SAAS,CAAC,OAAf,uBACI,aAAK,SAAS,CAAC,cAAf,wBACI,aAAK,SAAS,CAAC,WAAf,wBACI,WAAI,SAAS,CAAC,WAAd,wBADJ,cAEI,aAAM,SAAS,CAAC,WAAhB,wDAFJ,GADJ,cAKI,YAAK,SAAS,CAAC,YAAf,uBACI,cAAM,SAAS,CAAC,UAAhB,CAA2B,QAAQ,CAAEA,MAArC,wBACI,cAAO,WAAW,CAAC,OAAnB,CAA2B,SAAS,CAAC,YAArC,CAAkD,GAAG,CAAEN,KAAvD,CAA8D,QAAQ,KAAtE,CAAuE,IAAI,CAAC,OAA5E,EADJ,cAEI,cAAO,WAAW,CAAC,UAAnB,CAA8B,SAAS,CAAC,YAAxC,CAAqD,SAAS,CAAC,GAA/D,CAAmE,GAAG,CAAEC,QAAxE,CAAkF,QAAQ,KAA1F,CAA2F,IAAI,CAAC,UAAhG,EAFJ,cAGI,eAAQ,SAAS,CAAC,aAAlB,CAAgC,QAAQ,CAAEE,UAA1C,UAAuDA,UAAU,cAAE,KAAC,gBAAD,EAAkB,KAAK,CAAC,OAAxB,EAAF,CAAsC,OAAvG,EAHJ,cAII,aAAM,SAAS,CAAC,aAAhB,6BAJJ,cAKI,eAAQ,SAAS,CAAC,qBAAlB,UAAyCA,UAAU,cAAE,KAAC,gBAAD,EAAkB,KAAK,CAAC,OAAxB,EAAF,CAAsC,gBAAzF,EALJ,GADJ,EALJ,GADJ,EADJ,CAmBH","sourcesContent":["import { useContext, useRef } from \"react\"\r\nimport \"./login.css\"\r\nimport {loginCall} from \"../../apiCalls\"\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nexport default function Login() {\r\n    const history = useHistory();\r\n    const email = useRef();\r\n    const password = useRef();\r\n    const{user, isFetching, error, dispatch} = useContext(AuthContext);\r\n    \r\n    const Submit = async (e) => {\r\n        e.preventDefault();\r\n        dispatch({type: \"LOGIN_START\"});\r\n        try {\r\n            const res = await axios.post(\"https://musasocialapi.herokuapp.com/auth/login\", {email: email.current.value, password: password.current.value});\r\n            dispatch({type: \"LOGIN_SUCCESS\", payload: res.data});\r\n            history.push(\"/\")\r\n        \r\n        } catch (error) {\r\n            dispatch({type: \"LOGIN_FAILURE\", payload: error});\r\n            console.log(error)\r\n        }\r\n        // loginCall({email: email.current.value, password: password.current.value}, dispatch)\r\n    };\r\n    return (\r\n        <div className=\"login\">\r\n            <div className=\"loginWrapper\">\r\n                <div className=\"loginLeft\">\r\n                    <h3 className=\"loginLogo\">MusaSocial</h3>\r\n                    <span className=\"loginDesc\">Connect with Friends That You Dont Have :)</span>\r\n                </div>\r\n                <div className=\"loginRight\">\r\n                    <form className=\"loginBox\" onSubmit={Submit}>\r\n                        <input placeholder=\"Email\" className=\"loginInput\" ref={email} required type=\"email\"/>\r\n                        <input placeholder=\"Password\" className=\"loginInput\" minLength=\"6\" ref={password} required type=\"password\"/>\r\n                        <button className=\"loginButton\" disabled={isFetching}>{isFetching? <CircularProgress color=\"white\"/> : \"Login\"}</button>\r\n                        <span className=\"loginForgot\">Forgot Password</span>\r\n                        <button className=\"loginRegisterButton\">{isFetching? <CircularProgress color=\"white\"/> : \"Create Account\"}</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}