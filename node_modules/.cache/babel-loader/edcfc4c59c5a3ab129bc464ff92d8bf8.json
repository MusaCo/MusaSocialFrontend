{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./profile.css\";import Topbar from\"../../components/topbar/Topbar\";import Sidebar from\"../../components/sidebar/Sidebar\";import Rightbar from\"../../components/rightbar/Rightbar\";import Feed from\"../../components/feed/Feed\";import{useEffect,useState,useContext}from\"react\";import axios from\"axios\";import{useParams}from\"react-router\";import{Redirect}from\"react-router-dom\";import{AuthContext}from\"../../context/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Profile(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var PF=process.env.REACT_APP_PUBLIC_FOLDER;var params=useParams().username;var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoggedin=_useState4[0],setisLoggedin=_useState4[1];var _useContext=useContext(AuthContext),dispatch=_useContext.dispatch;useEffect(function(){var checkifLoggedin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:\"LOGIN_START\"});_context.prev=1;_context.next=4;return axios.get(\"/auth/login\");case 4:res=_context.sent;if(res.data.Loggedin===true){setisLoggedin(true);dispatch({type:\"LOGIN_SUCCESS\",payload:res.data.message});}else{setisLoggedin(false);}_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);setisLoggedin(false);dispatch({type:\"LOGIN_FAILURE\",payload:_context.t0});case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function checkifLoggedin(){return _ref.apply(this,arguments);};}();checkifLoggedin();},[]);useEffect(function(){if(isLoggedin){var fetchUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"/users?username=\".concat(params));case 2:result=_context2.sent;setUser(result.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchUser(){return _ref2.apply(this,arguments);};}();fetchUser();}},[params]);if(!isLoggedin){return/*#__PURE__*/_jsx(Redirect,{to:\"/login\"});}if(user){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Topbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"profileRight\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profileRightTop\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profileCover\",children:[/*#__PURE__*/_jsx(\"img\",{src:user.coverPicture?PF+user.coverPicture:PF+\"nopfp.jpg\",alt:\"\",className:\"profileCoverImg\"}),/*#__PURE__*/_jsx(\"img\",{src:user.profilePicture?PF+user.profilePicture:PF+\"nopfp.jpg\",alt:\"\",className:\"profileUserImg\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profileInfo\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"profileInfoName\",children:user===null||user===void 0?void 0:user.username}),/*#__PURE__*/_jsx(\"span\",{className:\"profileInfoDesc\",children:user===null||user===void 0?void 0:user.desc})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profileRightBottom\",children:[/*#__PURE__*/_jsx(Feed,{username:user===null||user===void 0?void 0:user.username}),/*#__PURE__*/_jsx(Rightbar,{user:user})]})]})]})]});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(Topbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"usernotFoundParent\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"usernotFound\",children:\"User Was Not Found!!\"})})]});}}","map":{"version":3,"sources":["C:/Users/musli/Desktop/mern MusaSocial/React/src/pages/profile/Profile.jsx"],"names":["Topbar","Sidebar","Rightbar","Feed","useEffect","useState","useContext","axios","useParams","Redirect","AuthContext","Profile","user","setUser","PF","process","env","REACT_APP_PUBLIC_FOLDER","params","username","isLoggedin","setisLoggedin","dispatch","checkifLoggedin","type","get","res","data","Loggedin","payload","message","fetchUser","result","coverPicture","profilePicture","desc"],"mappings":"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","sourcesContent":["import \"./profile.css\"\r\nimport Topbar from \"../../components/topbar/Topbar\";\r\nimport Sidebar from \"../../components/sidebar/Sidebar\";\r\nimport Rightbar from \"../../components/rightbar/Rightbar\";\r\nimport Feed from \"../../components/feed/Feed\";\r\nimport { useEffect, useState, useContext} from \"react\"\r\nimport  axios  from \"axios\";\r\nimport { useParams } from \"react-router\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\n\r\nexport default function Profile() {\r\n    const [user, setUser] = useState()\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n    const params = useParams().username;\r\n    const [isLoggedin, setisLoggedin] = useState(true)\r\n    const{dispatch} = useContext(AuthContext);\r\n    \r\n    useEffect(() => {\r\n        const checkifLoggedin = async () =>{\r\n            dispatch({type: \"LOGIN_START\"});\r\n            try {\r\n                const res = await axios.get(\"/auth/login\");\r\n                if (res.data.Loggedin === true) {\r\n                    setisLoggedin(true)\r\n                    dispatch({type: \"LOGIN_SUCCESS\", payload: res.data.message});\r\n                }\r\n                else{\r\n                    setisLoggedin(false);\r\n                }\r\n            } \r\n            catch (error) {\r\n                setisLoggedin(false);\r\n                dispatch({type: \"LOGIN_FAILURE\", payload: error});    \r\n             }\r\n            }\r\n        checkifLoggedin();\r\n        \r\n    }, [])\r\n\r\n    \r\n\r\n    useEffect(() => {\r\n        if (isLoggedin) {\r\n            const fetchUser = async () =>{\r\n                const result = await axios.get(`/users?username=${params}`);\r\n                setUser(result.data)\r\n            };\r\n            fetchUser();\r\n        }\r\n    }, [params])\r\n\r\n    if (!isLoggedin) {\r\n        return  <Redirect to=\"/login\" />\r\n    }\r\n\r\n    if (user) {\r\n        return(\r\n            <>\r\n        <Topbar/>\r\n        <div className=\"profile\">\r\n            <Sidebar/>\r\n            <div className=\"profileRight\">\r\n                <div className=\"profileRightTop\">\r\n                    <div className=\"profileCover\">\r\n                        <img src={user.coverPicture? PF + user.coverPicture : PF + \"nopfp.jpg\"} alt=\"\" className=\"profileCoverImg\" />\r\n                        <img src={user.profilePicture? PF + user.profilePicture : PF + \"nopfp.jpg\"} alt=\"\" className=\"profileUserImg\" />\r\n                    </div>\r\n                    <div className=\"profileInfo\">\r\n                        <h4 className=\"profileInfoName\">{user?.username}</h4>\r\n                        <span className=\"profileInfoDesc\">{user?.desc}</span>\r\n                    </div>\r\n                </div>\r\n                <div className=\"profileRightBottom\">\r\n                    <Feed username={user?.username}/>\r\n                    <Rightbar user={user}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        </>\r\n        )\r\n        \r\n    } else {\r\n        return (\r\n                <div className=\"\">\r\n                    <Topbar/>\r\n                    <div className=\"usernotFoundParent\">\r\n                        <h4 className=\"usernotFound\">User Was Not Found!!</h4>\r\n                    </div>\r\n                </div>\r\n                \r\n                \r\n            )\r\n    }\r\n    \r\n}\r\n"]},"metadata":{},"sourceType":"module"}