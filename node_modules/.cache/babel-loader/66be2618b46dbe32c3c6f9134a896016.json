{"ast":null,"code":"import _toConsumableArray from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import{useEffect,useState}from\"react\";import\"./chatonline.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ChatOnline(_ref){var onlineusers=_ref.onlineusers,currentId=_ref.currentId,setcurrentChat=_ref.setcurrentChat;var PF=process.env.REACT_APP_PUBLIC_FOLDER;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),friends=_useState2[0],setfriends=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),onlineFriends=_useState4[0],setonlineFriends=_useState4[1];useEffect(function(){var getFriends=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/users/friends/\"+currentId);case 3:res=_context.sent;setfriends(res.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getFriends(){return _ref2.apply(this,arguments);};}();getFriends();},[currentId]);var handleClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(userr){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"/conversations/find/\".concat(currentId,\"/\").concat(userr._id));case 3:res=_context2.sent;console.log(res);setcurrentChat(res.data);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function handleClick(_x){return _ref3.apply(this,arguments);};}();useEffect(function(){setonlineFriends([]);for(var index=0;index<(onlineusers===null||onlineusers===void 0?void 0:onlineusers.length);index++){for(var i=0;i<(friends===null||friends===void 0?void 0:friends.length);i++){if(onlineusers[index]===friends[i]._id){setonlineFriends([].concat(_toConsumableArray(onlineFriends),[friends[i]]));}}}},[friends,onlineusers]);return/*#__PURE__*/_jsx(\"div\",{className:\"chatOnline\",children:onlineFriends===null||onlineFriends===void 0?void 0:onlineFriends.map(function(use){return/*#__PURE__*/_jsxs(\"div\",{className:\"chatOnlineFriend\",onClick:function onClick(){return handleClick(use);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chatOnlineImgContainer\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"chatOnlineImg\",src:PF+(use===null||use===void 0?void 0:use.profilePicture),alt:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"chatOnlineBadge\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"chatOnlineName\",children:use===null||use===void 0?void 0:use.username})]});})});}","map":{"version":3,"sources":["C:/Users/musli/Desktop/mern MusaSocial/React/src/components/chatOnline/ChatOnline.jsx"],"names":["axios","useEffect","useState","ChatOnline","onlineusers","currentId","setcurrentChat","PF","process","env","REACT_APP_PUBLIC_FOLDER","friends","setfriends","onlineFriends","setonlineFriends","getFriends","get","res","data","console","log","handleClick","userr","_id","index","length","i","map","use","profilePicture","username"],"mappings":"ipBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAO,kBAAP,C,wFAEA,cAAe,SAASC,CAAAA,UAAT,MAA8D,IAAzCC,CAAAA,WAAyC,MAAzCA,WAAyC,CAA5BC,SAA4B,MAA5BA,SAA4B,CAAjBC,cAAiB,MAAjBA,cAAiB,CACzE,GAAMC,CAAAA,EAAE,CAAGC,OAAO,CAACC,GAAR,CAAYC,uBAAvB,CACA,cAA8BR,QAAQ,CAAC,IAAD,CAAtC,wCAAOS,OAAP,eAAgBC,UAAhB,eACA,eAA0CV,QAAQ,CAAC,EAAD,CAAlD,yCAAOW,aAAP,eAAsBC,gBAAtB,eACAb,SAAS,CAAC,UAAM,CACZ,GAAMc,CAAAA,UAAU,2FAAG,iLAEOf,CAAAA,KAAK,CAACgB,GAAN,CAAU,kBAAoBX,SAA9B,CAFP,QAELY,GAFK,eAGXL,UAAU,CAACK,GAAG,CAACC,IAAL,CAAV,CAHW,+EAMXC,OAAO,CAACC,GAAR,cANW,oEAAH,kBAAVL,CAAAA,UAAU,2CAAhB,CASAA,UAAU,GAEb,CAZQ,CAYN,CAACV,SAAD,CAZM,CAAT,CAcA,GAAMgB,CAAAA,WAAW,2FAAG,kBAAOC,KAAP,sKAEMtB,CAAAA,KAAK,CAACgB,GAAN,+BAAiCX,SAAjC,aAA8CiB,KAAK,CAACC,GAApD,EAFN,QAENN,GAFM,gBAGZE,OAAO,CAACC,GAAR,CAAYH,GAAZ,EACAX,cAAc,CAACW,GAAG,CAACC,IAAL,CAAd,CAJY,mFAObC,OAAO,CAACC,GAAR,eAPa,sEAAH,kBAAXC,CAAAA,WAAW,6CAAjB,CAWApB,SAAS,CAAC,UAAM,CACZa,gBAAgB,CAAC,EAAD,CAAhB,CACA,IAAK,GAAIU,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,EAAGpB,WAAH,SAAGA,WAAH,iBAAGA,WAAW,CAAEqB,MAAhB,CAAzB,CAAiDD,KAAK,EAAtD,CAA0D,CACtD,IAAK,GAAIE,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,EAAGf,OAAH,SAAGA,OAAH,iBAAGA,OAAO,CAAEc,MAAZ,CAAjB,CAAqCC,CAAC,EAAtC,CAA0C,CACtC,GAAItB,WAAW,CAACoB,KAAD,CAAX,GAAuBb,OAAO,CAACe,CAAD,CAAP,CAAWH,GAAtC,CAA2C,CACvCT,gBAAgB,8BAAKD,aAAL,GAAoBF,OAAO,CAACe,CAAD,CAA3B,GAAhB,CACH,CACJ,CACJ,CACJ,CATQ,CASN,CAACf,OAAD,CAAUP,WAAV,CATM,CAAT,CAaA,mBACI,YAAK,SAAS,CAAC,YAAf,UACKS,aADL,SACKA,aADL,iBACKA,aAAa,CAAEc,GAAf,CAAmB,SAACC,GAAD,qBAChB,aAAK,SAAS,CAAC,kBAAf,CAAkC,OAAO,CAAE,yBAAMP,CAAAA,WAAW,CAACO,GAAD,CAAjB,EAA3C,wBACA,aAAK,SAAS,CAAC,wBAAf,wBACI,YAAK,SAAS,CAAC,eAAf,CAA+B,GAAG,CAAErB,EAAE,EAAGqB,GAAH,SAAGA,GAAH,iBAAGA,GAAG,CAAEC,cAAR,CAAtC,CAA8D,GAAG,CAAC,EAAlE,EADJ,cAEI,YAAK,SAAS,CAAC,iBAAf,EAFJ,GADA,cAKA,aAAM,SAAS,CAAC,gBAAhB,UAAkCD,GAAlC,SAAkCA,GAAlC,iBAAkCA,GAAG,CAAEE,QAAvC,EALA,GADgB,EAAnB,CADL,EADJ,CAaH","sourcesContent":["import axios from \"axios\"\r\nimport { useEffect, useState } from \"react\";\r\nimport \"./chatonline.css\"\r\n\r\nexport default function ChatOnline({onlineusers, currentId, setcurrentChat}) {\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n    const [friends, setfriends] = useState(null)\r\n    const [onlineFriends, setonlineFriends] = useState([])\r\n    useEffect(() => {\r\n        const getFriends = async () =>{\r\n            try {\r\n                const res = await axios.get(\"/users/friends/\" + currentId)\r\n                setfriends(res.data)\r\n            } \r\n            catch (error) {\r\n                console.log(error)\r\n            }\r\n        }\r\n        getFriends();\r\n        \r\n    }, [currentId])\r\n\r\n    const handleClick = async (userr) => {\r\n        try {\r\n            const res = await axios.get(`/conversations/find/${currentId}/${userr._id}`)\r\n            console.log(res)\r\n            setcurrentChat(res.data)\r\n        } \r\n        catch (error) {\r\n           console.log(error) \r\n        }\r\n    }\r\n    \r\n    useEffect(() => {\r\n        setonlineFriends([]);\r\n        for (let index = 0; index < onlineusers?.length; index++) {\r\n            for (let i = 0; i < friends?.length; i++) {\r\n                if (onlineusers[index] === friends[i]._id) {\r\n                    setonlineFriends([...onlineFriends, friends[i]])\r\n                }\r\n            }\r\n        }\r\n    }, [friends, onlineusers])\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"chatOnline\">\r\n            {onlineFriends?.map((use) => (\r\n                <div className=\"chatOnlineFriend\" onClick={() => handleClick(use)}>\r\n                <div className=\"chatOnlineImgContainer\">\r\n                    <img className=\"chatOnlineImg\" src={PF + use?.profilePicture} alt=\"\" />\r\n                    <div className=\"chatOnlineBadge\"></div>\r\n                </div>\r\n                <span className=\"chatOnlineName\">{use?.username}</span>\r\n            </div>\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}