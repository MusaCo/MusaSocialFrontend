{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Topbar from\"../../components/topbar/Topbar\";import Sidebar from\"../../components/sidebar/Sidebar\";import Rightbar from\"../../components/rightbar/Rightbar\";import Feed from\"../../components/feed/Feed\";import\"./home.css\";import{useEffect,useState,useContext}from\"react\";import axios from\"axios\";import{Redirect}from\"react-router-dom\";import{AuthContext}from\"../../context/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Home(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoggedin=_useState2[0],setisLoggedin=_useState2[1];var _useContext=useContext(AuthContext),user=_useContext.user,isFetching=_useContext.isFetching,error=_useContext.error,dispatch=_useContext.dispatch;useEffect(function(){var checkifLoggedin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:\"LOGIN_START\"});_context.prev=1;_context.next=4;return axios.get(\"https://musasocialapi.herokuapp.com/auth/login\");case 4:res=_context.sent;if(res.data.Loggedin===true){setisLoggedin(true);dispatch({type:\"LOGIN_SUCCESS\",payload:res.data.message});}else{setisLoggedin(false);}_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);setisLoggedin(false);dispatch({type:\"LOGIN_FAILURE\",payload:_context.t0});case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function checkifLoggedin(){return _ref.apply(this,arguments);};}();checkifLoggedin();},[]);if(!isLoggedin){return/*#__PURE__*/_jsx(Redirect,{to:\"/login\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Topbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"homeContainer\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsx(Feed,{}),/*#__PURE__*/_jsx(Rightbar,{})]})]});}","map":{"version":3,"sources":["C:/Users/musli/Desktop/mern MusaSocial/React/src/pages/home/Home.jsx"],"names":["Topbar","Sidebar","Rightbar","Feed","useEffect","useState","useContext","axios","Redirect","AuthContext","Home","isLoggedin","setisLoggedin","user","isFetching","error","dispatch","checkifLoggedin","type","get","res","data","Loggedin","payload","message"],"mappings":"seAAA,MAAOA,CAAAA,MAAP,KAAmB,gCAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,kCAApB,CACA,MAAOC,CAAAA,QAAP,KAAqB,oCAArB,CACA,MAAOC,CAAAA,IAAP,KAAiB,4BAAjB,CACA,MAAO,YAAP,CACA,OAASC,SAAT,CAAoBC,QAApB,CAA8BC,UAA9B,KAAgD,OAAhD,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAASC,WAAT,KAA4B,2BAA5B,C,6IAEA,cAAe,SAASC,CAAAA,IAAT,EAAgB,CAC3B,cAAoCL,QAAQ,CAAC,IAAD,CAA5C,wCAAOM,UAAP,eAAmBC,aAAnB,eACA,gBAA2CN,UAAU,CAACG,WAAD,CAArD,CAAMI,IAAN,aAAMA,IAAN,CAAYC,UAAZ,aAAYA,UAAZ,CAAwBC,KAAxB,aAAwBA,KAAxB,CAA+BC,QAA/B,aAA+BA,QAA/B,CAEAZ,SAAS,CAAC,UAAM,CACZ,GAAMa,CAAAA,eAAe,0FAAG,2IACpBD,QAAQ,CAAC,CAACE,IAAI,CAAE,aAAP,CAAD,CAAR,CADoB,sCAGEX,CAAAA,KAAK,CAACY,GAAN,CAAU,gDAAV,CAHF,QAGVC,GAHU,eAIhB,GAAIA,GAAG,CAACC,IAAJ,CAASC,QAAT,GAAsB,IAA1B,CAAgC,CAC5BV,aAAa,CAAC,IAAD,CAAb,CACAI,QAAQ,CAAC,CAACE,IAAI,CAAE,eAAP,CAAwBK,OAAO,CAAEH,GAAG,CAACC,IAAJ,CAASG,OAA1C,CAAD,CAAR,CACH,CAHD,IAII,CACAZ,aAAa,CAAC,KAAD,CAAb,CACH,CAVe,+EAahBA,aAAa,CAAC,KAAD,CAAb,CACAI,QAAQ,CAAC,CAACE,IAAI,CAAE,eAAP,CAAwBK,OAAO,YAA/B,CAAD,CAAR,CAdgB,oEAAH,kBAAfN,CAAAA,eAAe,0CAArB,CAiBAA,eAAe,GAElB,CApBQ,CAoBN,EApBM,CAAT,CAsBA,GAAI,CAACN,UAAL,CAAiB,CACb,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EAAP,CACH,CAED,mBACI,wCACA,KAAC,MAAD,IADA,cAEA,aAAK,SAAS,CAAC,eAAf,wBACI,KAAC,OAAD,IADJ,cAEI,KAAC,IAAD,IAFJ,cAGI,KAAC,QAAD,IAHJ,GAFA,GADJ,CAWH","sourcesContent":["import Topbar from \"../../components/topbar/Topbar\";\r\nimport Sidebar from \"../../components/sidebar/Sidebar\";\r\nimport Rightbar from \"../../components/rightbar/Rightbar\";\r\nimport Feed from \"../../components/feed/Feed\";\r\nimport \"./home.css\";\r\nimport { useEffect, useState, useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\n\r\nexport default function Home() {\r\n    const [isLoggedin, setisLoggedin] = useState(true)\r\n    const{user, isFetching, error, dispatch} = useContext(AuthContext);\r\n    \r\n    useEffect(() => {\r\n        const checkifLoggedin = async () =>{\r\n            dispatch({type: \"LOGIN_START\"});\r\n            try {\r\n                const res = await axios.get(\"https://musasocialapi.herokuapp.com/auth/login\");\r\n                if (res.data.Loggedin === true) {\r\n                    setisLoggedin(true)\r\n                    dispatch({type: \"LOGIN_SUCCESS\", payload: res.data.message});\r\n                }\r\n                else{\r\n                    setisLoggedin(false);\r\n                }\r\n            } \r\n            catch (error) {\r\n                setisLoggedin(false);\r\n                dispatch({type: \"LOGIN_FAILURE\", payload: error});    \r\n             }\r\n            }\r\n        checkifLoggedin();\r\n        \r\n    }, [])\r\n\r\n    if (!isLoggedin) {\r\n        return <Redirect to=\"/login\" />\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <Topbar/>\r\n        <div className=\"homeContainer\">\r\n            <Sidebar/>\r\n            <Feed/>\r\n            <Rightbar/>\r\n        </div>\r\n        \r\n        </>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}