{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\musli\\\\Desktop\\\\mern MusaSocial\\\\React\\\\src\\\\pages\\\\profile\\\\Profile.jsx\",\n    _s = $RefreshSig$();\n\nimport \"./profile.css\";\nimport Topbar from \"../../components/topbar/Topbar\";\nimport Sidebar from \"../../components/sidebar/Sidebar\";\nimport Rightbar from \"../../components/rightbar/Rightbar\";\nimport Feed from \"../../components/feed/Feed\";\nimport { useEffect, useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { useParams } from \"react-router\";\nimport { Redirect } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Profile() {\n  _s();\n\n  const [user, setUser] = useState();\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\n  const params = useParams().username;\n  const [isLoggedin, setisLoggedin] = useState(true); //const{dispatch} = useContext(AuthContext);\n\n  useEffect(() => {\n    const checkifLoggedin = async () => {\n      // dispatch({type: \"LOGIN_START\"});\n      // try {\n      //     const res = await axios.get(\"https://musasocialapi.herokuapp.com/auth/login\");\n      //     if (res.data.Loggedin === true) {\n      //         setisLoggedin(true)\n      //         dispatch({type: \"LOGIN_SUCCESS\", payload: res.data.message});\n      //     }\n      //     else{\n      //         setisLoggedin(false);\n      //     }\n      // } \n      // catch (error) {\n      //     setisLoggedin(false);\n      //     dispatch({type: \"LOGIN_FAILURE\", payload: error});    \n      //  }\n      try {\n        const accesstoken = localStorage.getItem(\"accesstoken\");\n        const res = await axios.get(\"https://musasocialapi.herokuapp.com/auth/login\", {\n          headers: {\n            authorization: \"Bearer \" + accesstoken\n          }\n        });\n\n        if (res.data.Loggedin === true) {\n          setisLoggedin(true);\n          setUser(res.data.message.user);\n        } else {\n          setisLoggedin(false);\n        }\n      } catch (error) {\n        setisLoggedin(false);\n      }\n    };\n\n    checkifLoggedin();\n  }, []);\n  useEffect(() => {\n    if (isLoggedin) {\n      const fetchUser = async () => {\n        const result = await axios.get(`https://musasocialapi.herokuapp.com/users?username=${params}`);\n        setUser(result.data);\n      };\n\n      fetchUser();\n    }\n  }, [params]);\n\n  if (!isLoggedin) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }, this);\n  }\n\n  if (user) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Topbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile\",\n        children: [/*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profileRight\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profileRightTop\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"profileCover\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: user.coverPicture ? PF + user.coverPicture : PF + \"nopfp.jpg\",\n                alt: \"\",\n                className: \"profileCoverImg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                src: user.profilePicture ? PF + user.profilePicture : PF + \"nopfp.jpg\",\n                alt: \"\",\n                className: \"profileUserImg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"profileInfo\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"profileInfoName\",\n                children: user === null || user === void 0 ? void 0 : user.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"profileInfoDesc\",\n                children: user === null || user === void 0 ? void 0 : user.desc\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profileRightBottom\",\n            children: [/*#__PURE__*/_jsxDEV(Feed, {\n              username: user === null || user === void 0 ? void 0 : user.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Rightbar, {\n              user: user\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: [/*#__PURE__*/_jsxDEV(Topbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"usernotFoundParent\",\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"usernotFound\",\n          children: \"User Was Not Found!!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }, this);\n  }\n}\n\n_s(Profile, \"+WSxvBE46gEbgfXNIWzSnruAFLs=\", false, function () {\n  return [useParams];\n});\n\n_c = Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["C:/Users/musli/Desktop/mern MusaSocial/React/src/pages/profile/Profile.jsx"],"names":["Topbar","Sidebar","Rightbar","Feed","useEffect","useState","useContext","axios","useParams","Redirect","AuthContext","Profile","user","setUser","PF","process","env","REACT_APP_PUBLIC_FOLDER","params","username","isLoggedin","setisLoggedin","checkifLoggedin","accesstoken","localStorage","getItem","res","get","headers","authorization","data","Loggedin","message","error","fetchUser","result","coverPicture","profilePicture","desc"],"mappings":";;;AAAA,OAAO,eAAP;AACA,OAAOA,MAAP,MAAmB,gCAAnB;AACA,OAAOC,OAAP,MAAoB,kCAApB;AACA,OAAOC,QAAP,MAAqB,oCAArB;AACA,OAAOC,IAAP,MAAiB,4BAAjB;AACA,SAASC,SAAT,EAAoBC,QAApB,EAA8BC,UAA9B,QAA+C,OAA/C;AACA,OAAQC,KAAR,MAAoB,OAApB;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,SAASC,WAAT,QAA4B,2BAA5B;;;AAEA,eAAe,SAASC,OAAT,GAAmB;AAAA;;AAC9B,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,EAAhC;AACA,QAAMS,EAAE,GAAGC,OAAO,CAACC,GAAR,CAAYC,uBAAvB;AACA,QAAMC,MAAM,GAAGV,SAAS,GAAGW,QAA3B;AACA,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BhB,QAAQ,CAAC,IAAD,CAA5C,CAJ8B,CAK9B;;AAGAD,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMkB,eAAe,GAAG,YAAW;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAI;AACA,cAAMC,WAAW,GAAGC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAApB;AACA,cAAMC,GAAG,GAAG,MAAMnB,KAAK,CAACoB,GAAN,CAAU,gDAAV,EAA4D;AAC1EC,UAAAA,OAAO,EAAE;AACLC,YAAAA,aAAa,EAAE,YAAYN;AADtB;AADiE,SAA5D,CAAlB;;AAKA,YAAIG,GAAG,CAACI,IAAJ,CAASC,QAAT,KAAsB,IAA1B,EAAgC;AAC5BV,UAAAA,aAAa,CAAC,IAAD,CAAb;AACAR,UAAAA,OAAO,CAACa,GAAG,CAACI,IAAJ,CAASE,OAAT,CAAiBpB,IAAlB,CAAP;AACH,SAHD,MAII;AACAS,UAAAA,aAAa,CAAC,KAAD,CAAb;AACH;AACJ,OAdD,CAeA,OAAOY,KAAP,EAAc;AACVZ,QAAAA,aAAa,CAAC,KAAD,CAAb;AACF;AACD,KAlCL;;AAmCAC,IAAAA,eAAe;AAElB,GAtCQ,EAsCN,EAtCM,CAAT;AA0CAlB,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIgB,UAAJ,EAAgB;AACZ,YAAMc,SAAS,GAAG,YAAW;AACzB,cAAMC,MAAM,GAAG,MAAM5B,KAAK,CAACoB,GAAN,CAAW,sDAAqDT,MAAO,EAAvE,CAArB;AACAL,QAAAA,OAAO,CAACsB,MAAM,CAACL,IAAR,CAAP;AACH,OAHD;;AAIAI,MAAAA,SAAS;AACZ;AACJ,GARQ,EAQN,CAAChB,MAAD,CARM,CAAT;;AAUA,MAAI,CAACE,UAAL,EAAiB;AACb,wBAAQ,QAAC,QAAD;AAAU,MAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,YAAR;AACH;;AAED,MAAIR,IAAJ,EAAU;AACN,wBACI;AAAA,8BACJ,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,cADI,eAEJ;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA,gCACI,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA,kCACI;AAAK,YAAA,SAAS,EAAC,iBAAf;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,cAAf;AAAA,sCACI;AAAK,gBAAA,GAAG,EAAEA,IAAI,CAACwB,YAAL,GAAmBtB,EAAE,GAAGF,IAAI,CAACwB,YAA7B,GAA4CtB,EAAE,GAAG,WAA3D;AAAwE,gBAAA,GAAG,EAAC,EAA5E;AAA+E,gBAAA,SAAS,EAAC;AAAzF;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAK,gBAAA,GAAG,EAAEF,IAAI,CAACyB,cAAL,GAAqBvB,EAAE,GAAGF,IAAI,CAACyB,cAA/B,GAAgDvB,EAAE,GAAG,WAA/D;AAA4E,gBAAA,GAAG,EAAC,EAAhF;AAAmF,gBAAA,SAAS,EAAC;AAA7F;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAKI;AAAK,cAAA,SAAS,EAAC,aAAf;AAAA,sCACI;AAAI,gBAAA,SAAS,EAAC,iBAAd;AAAA,0BAAiCF,IAAjC,aAAiCA,IAAjC,uBAAiCA,IAAI,CAAEO;AAAvC;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAM,gBAAA,SAAS,EAAC,iBAAhB;AAAA,0BAAmCP,IAAnC,aAAmCA,IAAnC,uBAAmCA,IAAI,CAAE0B;AAAzC;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAWI;AAAK,YAAA,SAAS,EAAC,oBAAf;AAAA,oCACI,QAAC,IAAD;AAAM,cAAA,QAAQ,EAAE1B,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEO;AAAtB;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,QAAC,QAAD;AAAU,cAAA,IAAI,EAAEP;AAAhB;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAXJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAFI;AAAA,oBADJ;AAyBH,GA1BD,MA0BO;AACH,wBACQ;AAAK,MAAA,SAAS,EAAC,EAAf;AAAA,8BACI,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA,+BACI;AAAI,UAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADR;AAUH;AAEJ;;GAvGuBD,O;UAGLH,S;;;KAHKG,O","sourcesContent":["import \"./profile.css\"\r\nimport Topbar from \"../../components/topbar/Topbar\";\r\nimport Sidebar from \"../../components/sidebar/Sidebar\";\r\nimport Rightbar from \"../../components/rightbar/Rightbar\";\r\nimport Feed from \"../../components/feed/Feed\";\r\nimport { useEffect, useState, useContext} from \"react\"\r\nimport  axios  from \"axios\";\r\nimport { useParams } from \"react-router\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\n\r\nexport default function Profile() {\r\n    const [user, setUser] = useState()\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n    const params = useParams().username;\r\n    const [isLoggedin, setisLoggedin] = useState(true)\r\n    //const{dispatch} = useContext(AuthContext);\r\n    \r\n    \r\n    useEffect(() => {\r\n        const checkifLoggedin = async () =>{\r\n            // dispatch({type: \"LOGIN_START\"});\r\n            // try {\r\n            //     const res = await axios.get(\"https://musasocialapi.herokuapp.com/auth/login\");\r\n            //     if (res.data.Loggedin === true) {\r\n            //         setisLoggedin(true)\r\n            //         dispatch({type: \"LOGIN_SUCCESS\", payload: res.data.message});\r\n            //     }\r\n            //     else{\r\n            //         setisLoggedin(false);\r\n            //     }\r\n            // } \r\n            // catch (error) {\r\n            //     setisLoggedin(false);\r\n            //     dispatch({type: \"LOGIN_FAILURE\", payload: error});    \r\n            //  }\r\n            try {\r\n                const accesstoken = localStorage.getItem(\"accesstoken\")\r\n                const res = await axios.get(\"https://musasocialapi.herokuapp.com/auth/login\", {\r\n                    headers: {\r\n                        authorization: \"Bearer \" + accesstoken\r\n                    }\r\n                });\r\n                if (res.data.Loggedin === true) {\r\n                    setisLoggedin(true)\r\n                    setUser(res.data.message.user)\r\n                }\r\n                else{\r\n                    setisLoggedin(false);\r\n                }\r\n            } \r\n            catch (error) {\r\n                setisLoggedin(false);\r\n             }\r\n            }\r\n        checkifLoggedin();\r\n        \r\n    }, [])\r\n\r\n    \r\n\r\n    useEffect(() => {\r\n        if (isLoggedin) {\r\n            const fetchUser = async () =>{\r\n                const result = await axios.get(`https://musasocialapi.herokuapp.com/users?username=${params}`);\r\n                setUser(result.data)\r\n            };\r\n            fetchUser();\r\n        }\r\n    }, [params])\r\n\r\n    if (!isLoggedin) {\r\n        return  <Redirect to=\"/login\" />\r\n    }\r\n\r\n    if (user) {\r\n        return(\r\n            <>\r\n        <Topbar/>\r\n        <div className=\"profile\">\r\n            <Sidebar/>\r\n            <div className=\"profileRight\">\r\n                <div className=\"profileRightTop\">\r\n                    <div className=\"profileCover\">\r\n                        <img src={user.coverPicture? PF + user.coverPicture : PF + \"nopfp.jpg\"} alt=\"\" className=\"profileCoverImg\" />\r\n                        <img src={user.profilePicture? PF + user.profilePicture : PF + \"nopfp.jpg\"} alt=\"\" className=\"profileUserImg\" />\r\n                    </div>\r\n                    <div className=\"profileInfo\">\r\n                        <h4 className=\"profileInfoName\">{user?.username}</h4>\r\n                        <span className=\"profileInfoDesc\">{user?.desc}</span>\r\n                    </div>\r\n                </div>\r\n                <div className=\"profileRightBottom\">\r\n                    <Feed username={user?.username}/>\r\n                    <Rightbar user={user}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        </>\r\n        )\r\n        \r\n    } else {\r\n        return (\r\n                <div className=\"\">\r\n                    <Topbar/>\r\n                    <div className=\"usernotFoundParent\">\r\n                        <h4 className=\"usernotFound\">User Was Not Found!!</h4>\r\n                    </div>\r\n                </div>\r\n                \r\n                \r\n            )\r\n    }\r\n    \r\n}\r\n"]},"metadata":{},"sourceType":"module"}