{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/musli/Desktop/mern MusaSocial/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./share.css\";import{PermMedia,Label,Room,EmojiEmotions,Cancel}from\"@material-ui/icons\";import{AuthContext}from\"../../context/AuthContext\";import{useContext,useRef,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Share(){var _useContext=useContext(AuthContext),user=_useContext.user;var PF=process.env.REACT_APP_PUBLIC_FOLDER;var desc=useRef();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setfile=_useState2[1];var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var newPost,data,filename;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();newPost={userId:user._id,desc:desc.current.value?desc.current.value:\" \"};if(!file){_context.next=16;break;}data=new FormData();filename=Date.now()+file.name;data.append(\"name\",filename);data.append(\"file\",file);newPost.img=filename;_context.prev=8;_context.next=11;return axios.post(\"https://musasocialapi.herokuapp.com/upload\",data);case 11:_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](8);console.log(_context.t0);case 16:_context.prev=16;_context.next=19;return axios.post(\"https://musasocialapi.herokuapp.com/post\",newPost);case 19:window.location.reload();_context.next=25;break;case 22:_context.prev=22;_context.t1=_context[\"catch\"](16);console.log(_context.t1);case 25:case\"end\":return _context.stop();}}},_callee,null,[[8,13],[16,22]]);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"share\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"shareWrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shareTop\",children:[/*#__PURE__*/_jsx(\"img\",{src:PF+(user===null||user===void 0?void 0:user.profilePicture),alt:\"\",className:\"shareProfileImg\"}),/*#__PURE__*/_jsx(\"input\",{ref:desc,placeholder:\"What's in your mind \"+(user===null||user===void 0?void 0:user.username),className:\"shareInput\"})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"shareHr\"}),file&&/*#__PURE__*/_jsxs(\"div\",{className:\"shareImgContainer\",children:[/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(file),alt:\"\",className:\"shareImg\"}),/*#__PURE__*/_jsx(Cancel,{className:\"shareImageCancel\",onClick:function onClick(){setfile(null);}})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"shareBottom\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shareOptions\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"file\",className:\"shareOption\",children:[/*#__PURE__*/_jsx(PermMedia,{className:\"shareIcon\",htmlColor:\"tomato\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Photo or Video\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",style:{display:\"none\"},accept:\".png,.jpg,.jpeg\",id:\"file\",onChange:function onChange(e){setfile(e.target.files[0]);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shareOption\",children:[/*#__PURE__*/_jsx(Label,{className:\"shareIcon\",htmlColor:\"blue\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Tag\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shareOption\",children:[/*#__PURE__*/_jsx(Room,{className:\"shareIcon\",htmlColor:\"green\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Location\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shareOption\",children:[/*#__PURE__*/_jsx(EmojiEmotions,{className:\"shareIcon\",htmlColor:\"goldenrod\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Feelings\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"shareButton\",type:\"submit\",children:\"Share\"})]})]})});}","map":{"version":3,"sources":["C:/Users/musli/Desktop/mern MusaSocial/React/src/components/share/Share.jsx"],"names":["PermMedia","Label","Room","EmojiEmotions","Cancel","AuthContext","useContext","useRef","useState","axios","Share","user","PF","process","env","REACT_APP_PUBLIC_FOLDER","desc","file","setfile","submitHandler","e","preventDefault","newPost","userId","_id","current","value","data","FormData","filename","Date","now","name","append","img","post","console","log","window","location","reload","profilePicture","username","URL","createObjectURL","display","target","files"],"mappings":"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","sourcesContent":["import \"./share.css\";\r\nimport { PermMedia, Label, Room, EmojiEmotions, Cancel } from \"@material-ui/icons\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport {useContext, useRef, useState} from \"react\"\r\nimport axios from \"axios\";\r\n\r\nexport default function Share() {\r\n    const {user} = useContext(AuthContext)\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n    const desc = useRef();\r\n    const [file, setfile] = useState(null)\r\n\r\n    const submitHandler = async(e) =>{\r\n        e.preventDefault()\r\n        const newPost = {\r\n            userId: user._id,\r\n            desc: desc.current.value? desc.current.value : \" \" \r\n        }\r\n        if (file) {\r\n            const data = new FormData();\r\n            const filename = Date.now() + file.name\r\n            data.append(\"name\", filename);\r\n            data.append(\"file\", file);\r\n            \r\n            newPost.img = filename;\r\n            try {\r\n                await axios.post(\"https://musasocialapi.herokuapp.com/upload\", data)\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n        try {\r\n            await axios.post(\"https://musasocialapi.herokuapp.com/post\", newPost)\r\n            window.location.reload();\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        \r\n    }\r\n\r\n    return (\r\n        <div className=\"share\">\r\n            <div className=\"shareWrapper\">\r\n                <div className=\"shareTop\">\r\n                    <img src= {PF + user?.profilePicture} alt=\"\" className=\"shareProfileImg\" />\r\n                    <input ref={desc} placeholder={\"What's in your mind \" + user?.username} className=\"shareInput\" />\r\n                </div>\r\n                <hr className=\"shareHr\" />\r\n                {file &&(\r\n                    <div className=\"shareImgContainer\">\r\n                        <img src={URL.createObjectURL(file)} alt=\"\" className=\"shareImg\"/>\r\n                        <Cancel className=\"shareImageCancel\" onClick={() => {setfile(null)}}/>\r\n                    </div>\r\n                )}\r\n                <form className=\"shareBottom\" onSubmit={submitHandler}>\r\n                    <div className=\"shareOptions\">\r\n                        <label htmlFor=\"file\" className=\"shareOption\">\r\n                            <PermMedia className=\"shareIcon\" htmlColor=\"tomato\"/>\r\n                            <span className=\"shareOptionText\">Photo or Video</span>\r\n                            <input type=\"file\" style={{display: \"none\"}} accept=\".png,.jpg,.jpeg\" id=\"file\" onChange={(e)=>{setfile(e.target.files[0])}}/>\r\n                        </label>\r\n                        <div className=\"shareOption\">\r\n                            <Label className=\"shareIcon\" htmlColor=\"blue\"/>\r\n                            <span className=\"shareOptionText\">Tag</span>\r\n                        </div>\r\n                        <div className=\"shareOption\">\r\n                            <Room className=\"shareIcon\" htmlColor=\"green\"/>\r\n                            <span className=\"shareOptionText\">Location</span>\r\n                        </div>\r\n                        <div className=\"shareOption\">\r\n                            <EmojiEmotions className=\"shareIcon\" htmlColor=\"goldenrod\"/>\r\n                            <span className=\"shareOptionText\">Feelings</span>\r\n                        </div>\r\n                    </div>\r\n                    <button className=\"shareButton\" type=\"submit\">Share</button>\r\n                </form>\r\n            </div>            \r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}